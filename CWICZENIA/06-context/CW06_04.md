# Task: GitHub Actions – Weather Info with Python

## Goal

You are given a repository that contains a Python script for retrieving weather information (e.g. `start.py`) located in the directory:

```text
./CWICZENIA/06-context/pogoda_python
```

Your goal is to create a **GitHub Actions workflow** (YAML file) that:

- Can be triggered manually from the GitHub Actions tab.
- Asks the user to provide a city name.
- Uses an environment variable storing the API key.
- Runs the Python script with the city and API key as arguments.
- Appends the script output to the GitHub Actions step summary.

The final deliverable is a **single YAML file** defining this workflow.

---

## Part 1 – Create the workflow file structure

1. Open the provided repository locally in your editor (e.g. VS Code).
2. In the repository root, create the following folder structure if it does not already exist:

   ```text
   .github/workflows
   ```

3. Inside the `.github/workflows` directory, create a new file, for example:

   ```text
   06-04-contexts-pogoda_python.yaml
   ```

   This file will contain the entire workflow definition.

---

## Part 2 – Define workflow metadata

4. At the top of the YAML file, define:

   - A **workflow display name** (e.g. `06-04 - Pogoda Info Python`).
   - A **run name** that dynamically includes the selected city (e.g. `06-04 - Python Pogoda dla ${{ inputs.city }}`).

   These values determine how the workflow and its runs will be shown in the GitHub Actions UI.

---

## Part 3 – Configure the trigger and inputs

5. Configure the workflow so that it can be started **manually**:

   - Use the `workflow_dispatch` trigger.
   - Define a single input parameter named `city`:
     - `type`: `string`
     - `description`: short explanation such as “City to get weather info for”
     - `default`: `Warsaw`

   This will create a text field in the GitHub UI where the user can type the city name when manually starting the workflow.

---

## Part 4 – Global environment variable (API key)

6. Declare a top-level `env` section for the workflow.

7. Inside `env`, define a variable named `MY_KLUCZYK` that will hold the weather API key. For the exercise, you may use a placeholder value, for example:

   ```yaml
   env:
     MY_KLUCZYK: "YOUR_WEATHER_API_KEY"
   ```

   > In a real project, you would typically use GitHub Secrets instead of hard-coding the key, but for this exercise a static value is acceptable.

---

## Part 5 – Define the job

8. Create a job named `pogoda-info` under the `jobs` section.

9. Configure the job with:

   - `name`: a readable job name (e.g. `Pobierz informacje o pogodzie`) that will appear in the Actions UI.
   - `runs-on`: `ubuntu-latest` (so the job runs on a Linux virtual machine).

10. Inside the job, define `defaults.run`:

    - `shell`: `bash`
    - `working-directory`: `./CWICZENIA/06-context/pogoda_python`

    This ensures all `run` commands in this job:

    - Use Bash as the shell.
    - Are executed from the directory where `start.py` is located.

---

## Part 6 – Define the steps

11. Add a `steps` section for the `pogoda-info` job.

12. First step – checkout repository:

    - Use `actions/checkout@v3`.
    - Give the step a descriptive name such as `Checkout repository`.

    This step is necessary so that the workflow runner has access to the repository files, including `start.py`.

13. Second step – run the Python script:

    - Give the step a name such as `Sprawdzanie pogody`.
    - Use a `run` block that:
      - Executes `python3 ./start.py`.
      - Passes two arguments to the script:
        1. The city, taken from the workflow input (`${{ inputs.city }}`).
        2. The API key, taken from the environment variable (`${{ env.MY_KLUCZYK }}`).
      - Appends the output of the script to the `$GITHUB_STEP_SUMMARY` file using `>>`.

    Conceptually, the step should behave like:

    ```bash
    python3 ./start.py "${{ inputs.city }}" "${{ env.MY_KLUCZYK }}" >> $GITHUB_STEP_SUMMARY
    ```

    This ensures that:

    - The script runs with the city and API key.
    - The result is visible in the **Step summary** panel of the GitHub Actions run.

---

## Part 7 – Commit, push, and test

14. Save the YAML file.

15. Commit your changes to the repository:

    ```bash
    git add .github/workflows/06-04-contexts-pogoda_python.yaml
    git commit -m "Add workflow for Python weather info"
    git push
    ```

16. In the GitHub web interface:

    - Go to the **Actions** tab.
    - Select the workflow you created by its name.
    - Click **Run workflow**.
    - In the input field for `city`, enter a city name or use the default.
    - Confirm to start the run.

17. When the run completes:

    - Open the workflow run details.
    - Check the `pogoda-info` job.
    - Open the **Steps summary** (Step Summary) and verify that the weather information produced by `start.py` was appended correctly.

---

## Deliverable

Your final answer for this task is the **YAML file** of the GitHub Actions workflow, placed in:

```text
.github/workflows/06-04-contexts-pogoda_python.yaml
```

The file must contain all of the configuration described above so that the workflow can be triggered manually, runs the Python weather script with the given city and API key, and writes the result into the GitHub Actions step summary.

---

# Zadanie: GitHub Actions – Informacje o pogodzie z użyciem Pythona

## Cel

Otrzymujesz repozytorium, które zawiera skrypt Pythona służący do pobierania informacji o pogodzie (np. `start.py`) znajdujący się w katalogu:

```text
./CWICZENIA/06-context/pogoda_python
```

Twoim celem jest utworzenie **workflow GitHub Actions** (pliku YAML), który:

- Może być uruchamiany ręcznie z zakładki GitHub Actions.
- Prosi użytkownika o podanie nazwy miasta.
- Używa zmiennej środowiskowej przechowującej klucz API.
- Uruchamia skrypt Pythona z parametrami: miasto i klucz API.
- Dopisuje wynik działania skryptu do podsumowania kroku (step summary) w GitHub Actions.

Końcowym rezultatem jest **jeden plik YAML** definiujący ten workflow.

---

## Część 1 – Utworzenie struktury dla workflow

1. Otwórz udostępnione repozytorium lokalnie w edytorze (np. VS Code).
2. W katalogu głównym repozytorium utwórz (jeśli nie istnieje) następującą strukturę folderów:

   ```text
   .github/workflows
   ```

3. W katalogu `.github/workflows` utwórz nowy plik, np.:

   ```text
   06-04-contexts-pogoda_python.yaml
   ```

   Ten plik będzie zawierał pełną definicję workflow.

---

## Część 2 – Metadane workflow

4. Na początku pliku YAML zdefiniuj:

   - **name** – nazwę workflow wyświetlaną w GitHub Actions, np. `06-04 - Pogoda Info Python`.
   - **run-name** – nazwę uruchomienia workflow, która dynamicznie zawiera wybrane miasto, np. `06-04 - Python Pogoda dla ${{ inputs.city }}`.

   Te wartości wpływają na to, jak workflow i jego uruchomienia będą widoczne w interfejsie GitHuba.

---

## Część 3 – Konfiguracja wyzwalacza i wejścia

5. Skonfiguruj workflow tak, aby mógł być uruchamiany **ręcznie**:

   - Użyj wyzwalacza `workflow_dispatch`.
   - Zdefiniuj pojedynczy parametr wejściowy `city`:
     - `type`: `string`
     - `description`: krótki opis, np. “City to get weather info for”
     - `default`: `Warsaw`

   Dzięki temu w UI GitHuba pojawi się pole tekstowe, w którym użytkownik poda nazwę miasta przy ręcznym uruchamianiu workflow.

---

## Część 4 – Globalna zmienna środowiskowa (klucz API)

6. Zadeklaruj sekcję `env` na poziomie całego workflow.

7. Wewnątrz `env` zdefiniuj zmienną `MY_KLUCZYK`, która będzie przechowywać klucz API do usługi pogodowej. Na potrzeby ćwiczenia możesz użyć wartości przykładowej, np.:

   ```yaml
   env:
     MY_KLUCZYK: "TWOJ_KLUCZ_API"
   ```

   > W prawdziwym projekcie zazwyczaj używa się GitHub Secrets zamiast wpisywania klucza na stałe, ale na potrzeby zadania jest to dopuszczalne.

---

## Część 5 – Definicja zadania (job)

8. Utwórz zadanie (job) o nazwie `pogoda-info` w sekcji `jobs`.

9. Skonfiguruj job:

   - `name`: czytelna nazwa, np. `Pobierz informacje o pogodzie`, która będzie widoczna w Actions.
   - `runs-on`: `ubuntu-latest` – job będzie uruchamiany na maszynie wirtualnej z systemem Linux.

10. Wewnątrz joba skonfiguruj `defaults.run`:

    - `shell`: `bash`
    - `working-directory`: `./CWICZENIA/06-context/pogoda_python`

    Dzięki temu wszystkie polecenia w sekcji `run`:

    - Będą wykonywane w powłoce Bash.
    - Zostaną uruchomione w katalogu, w którym znajduje się `start.py`.

---

## Część 6 – Definicja kroków

11. Dodaj sekcję `steps` w jobie `pogoda-info`.

12. Pierwszy krok – pobranie repozytorium:

    - Użyj akcji `actions/checkout@v3`.
    - Nadaj krokowi opisową nazwę, np. `Checkout repository`.

    Ten krok jest niezbędny, aby runner miał dostęp do plików repozytorium, w tym `start.py`.

13. Drugi krok – uruchomienie skryptu Pythona:

    - Nadaj krokowi nazwę, np. `Sprawdzanie pogody`.
    - Użyj bloku `run`, który:
      - Uruchomi `python3 ./start.py`.
      - Przekaże do skryptu dwa argumenty:
        1. Miasto pobrane z parametru wejściowego workflow (`${{ inputs.city }}`).
        2. Klucz API pobrany ze zmiennej środowiskowej (`${{ env.MY_KLUCZYK }}`).
      - Dopisze wynik działania skryptu do pliku `$GITHUB_STEP_SUMMARY` za pomocą operatora `>>`.

    Koncepcyjnie krok powinien wyglądać jak:

    ```bash
    python3 ./start.py "${{ inputs.city }}" "${{ env.MY_KLUCZYK }}" >> $GITHUB_STEP_SUMMARY
    ```

    Dzięki temu:

    - Skrypt uruchomi się z podanym miastem i kluczem API.
    - Wynik będzie widoczny w panelu **Step summary** w szczegółach uruchomienia workflow.

---

## Część 7 – Commit, push i test

14. Zapisz plik YAML.

15. Wykonaj commit zmian w repozytorium:

    ```bash
    git add .github/workflows/06-04-contexts-pogoda_python.yaml
    git commit -m "Dodaj workflow do pobierania pogody w Pythonie"
    git push
    ```

16. W interfejsie GitHuba:

    - Przejdź do zakładki **Actions**.
    - Wybierz utworzony workflow po jego nazwie.
    - Kliknij **Run workflow**.
    - W polu `city` wpisz nazwę miasta lub pozostaw wartość domyślną.
    - Uruchom workflow.

17. Po zakończeniu działania:

    - Otwórz szczegóły uruchomienia workflow.
    - Sprawdź job `pogoda-info`.
    - Otwórz **Step summary** i zweryfikuj, że informacja o pogodzie zwrócona przez `start.py` została poprawnie dopisana.

---

## Rezultat

Końcowym wynikiem zadania jest **plik YAML workflow** umieszczony w:

```text
.github/workflows/06-04-contexts-pogoda_python.yaml
```

Plik musi zawierać wszystkie opisane wyżej elementy, tak aby workflow można było uruchomić ręcznie, aby uruchamiał skrypt Pythona do pobierania informacji o pogodzie z podanym miastem i kluczem API oraz aby wynik działania skryptu był dopisywany do podsumowania kroku w GitHub Actions.
