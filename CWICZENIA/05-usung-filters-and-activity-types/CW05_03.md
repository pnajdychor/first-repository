
# GitHub Actions CI Workflow â€” Line-by-Line Explanation / SzczegÃ³Å‚owe objaÅ›nienie linia po linii

> **File:** `.github/workflows/ci.yml`

---

## ğŸ‡¬ğŸ‡§ English

### 1) Goal & Where This File Lives
- **Purpose:** Provide a Continuous Integration (CI) workflow for a Node.js project using GitHub Actions.
- **Location:** Save this file at `.github/workflows/ci.yml` in your repository. GitHub automatically detects workflows placed there.

### 2) Step-by-Step, Line-by-Line

1. ``name: CI``  
   Sets the workflowâ€™s display name (â€œCIâ€) shown in the Actions tab and in run logs.

2. ````yaml
   on:
     push:
       branches: [ main ]
       paths-ignore:
         - '05-usung-filters-and-activity-types/dokumentacja/**'
     pull_request:
       branches: [ main ]
       paths-ignore:
         - '05-usung-filters-and-activity-types/dokumentacja/**'
     workflow_dispatch:
   ````
   **`on:`** Declares the events that trigger the workflow.
   - **`push:`** Runs when commits are pushed to the repository.
     - **`branches: [ main ]`** Only triggers on pushes targeting the `main` branch.
     - **`paths-ignore:`** Skips runs if only files under `05-usung-filters-and-activity-types/dokumentacja/**` changed (e.g., documentation-only updates).
   - **`pull_request:`** Runs when a pull request targets the repository.
     - **`branches: [ main ]`** Only triggers for PRs whose base branch is `main`.
     - **`paths-ignore:`** Skips runs if the PR only changes files under `05-usung-filters-and-activity-types/dokumentacja/**`.
   - **`workflow_dispatch:`** Allows manual runs from the GitHub UI (Actions tab â†’ â€œRun workflowâ€).

3. ````yaml
   permissions:
     contents: read
   ````
   Sets default permissions for the `GITHUB_TOKEN` provided to this workflow.  
   - **`contents: read`** grants read-only access to repository contents, following the principle of least privilege. Useful for checking out code without unnecessary write permissions.

4. ````yaml
   jobs:
     build:
       runs-on: ubuntu-latest
       defaults:
         run:
           shell: bash
           working-directory: CWICZENIA/05-usung-filters-and-activity-types/
   ````
   Declares the **`build`** job.
   - **`runs-on: ubuntu-latest`**: The job runs on a hosted Ubuntu runner with the latest supported image.
   - **`defaults.run.shell: bash`**: All `run:` steps use Bash by default.
   - **`defaults.run.working-directory: CWICZENIA/05-usung-filters-and-activity-types/`**: All `run:` steps execute from this subdirectory (avoids repeating `cd` commands). Adjust if your project lives elsewhere.

5. ````yaml
       steps:
         - name: Checkout
           uses: actions/checkout@v4
   ````
   Begins the list of steps in the `build` job.
   - **`- name: Checkout`**: Human-friendly label for the step.
   - **`uses: actions/checkout@v4`**: Official action to fetch your repository code onto the runner so subsequent steps can access files.

6. ````yaml
         - name: Ustal wersjÄ™ Node (przykÅ‚ad)
           uses: actions/setup-node@v4
           with:
             node-version: '20'
   ````
   Sets the Node.js version for the environment.
   - **`uses: actions/setup-node@v4`**: Official action for installing/configuring Node.js.
   - **`with.node-version: '20'`**: Installs Node 20.x. Pinning a major version ensures consistent tooling across runs.

7. ````yaml
         - name: Instalacja zaleÅ¼noÅ›ci
           run: npm ci
   ````
   Installs production and dev dependencies in a clean, reproducible way.
   - **`npm ci`**: Uses the lockfile (e.g., `package-lock.json`) to perform a clean install. Faster and more deterministic than `npm install` in CI.

8. ````yaml
         - name: Testy
           run: npm test -- --ci
   ````
   Runs the projectâ€™s test suite.
   - **`npm test`**: Executes the test script from `package.json`.
   - **`-- --ci`**: Forwards the `--ci` flag to the underlying test runner (e.g., Jest) to enforce non-interactive, CI-friendly behavior and consistent output.

### 3) How to Deliver This
1. Create the folders if they do not exist: `.github/workflows/`.
2. Add the file `ci.yml` with the contents described above.
3. Commit and push to `main` or open a PR targeting `main`. The workflow will run on `push`, `pull_request`, and on demand via `workflow_dispatch`.

### 4) Useful Notes & Tips
- **Path filters:** `paths-ignore` saves compute time by skipping CI if only documentation paths change.
- **Permissions:** Keep `contents: read` unless your steps need more (e.g., creating releases). Tight permissions reduce risk.
- **Caching (optional):** You can add `actions/setup-node` cache (`cache: 'npm'`) to speed up `npm ci`.
- **Matrix builds (optional):** Use `strategy.matrix.node-version: [18, 20]` to test multiple Node versions if needed.

---

## ğŸ‡µğŸ‡± Polski

### 1) Cel i lokalizacja pliku
- **Cel:** UdostÄ™pniÄ‡ workflow CI dla projektu Node.js z uÅ¼yciem GitHub Actions.
- **Lokalizacja:** Zapisz plik w katalogu `.github/workflows/ci.yml`. GitHub automatycznie wykrywa workflowy umieszczone w tym miejscu.

### 2) Krok po kroku, linia po linii

1. ``name: CI``  
   Ustala nazwÄ™ workflow (â€CIâ€), pokazywanÄ… w zakÅ‚adce Actions oraz w logach uruchomieÅ„.

2. ````yaml
   on:
     push:
       branches: [ main ]
       paths-ignore:
         - '05-usung-filters-and-activity-types/dokumentacja/**'
     pull_request:
       branches: [ main ]
       paths-ignore:
         - '05-usung-filters-and-activity-types/dokumentacja/**'
     workflow_dispatch:
   ````
   **`on:`** Deklaruje zdarzenia wyzwalajÄ…ce workflow.
   - **`push:`** Uruchamia siÄ™ podczas wpychania commitÃ³w do repozytorium.
     - **`branches: [ main ]`** DziaÅ‚a tylko dla pushy na gaÅ‚Ä…Åº `main`.
     - **`paths-ignore:`** Pomija uruchomienie, jeÅ›li zmienione zostaÅ‚y wyÅ‚Ä…cznie pliki w `05-usung-filters-and-activity-types/dokumentacja/**` (np. same materiaÅ‚y dokumentacyjne).
   - **`pull_request:`** Uruchamia siÄ™ dla pull requestÃ³w.
     - **`branches: [ main ]`** Tylko dla PR-Ã³w, ktÃ³rych gaÅ‚Ä…Åº bazowa to `main`.
     - **`paths-ignore:`** Pomija uruchomienie, jeÅ›li PR zmienia wyÅ‚Ä…cznie pliki w `05-usung-filters-and-activity-types/dokumentacja/**`.
   - **`workflow_dispatch:`** Pozwala rÄ™cznie uruchamiaÄ‡ workflow z interfejsu GitHub (Actions â†’ â€Run workflowâ€).

3. ````yaml
   permissions:
     contents: read
   ````
   Ustawia domyÅ›lne uprawnienia dla `GITHUB_TOKEN` dostÄ™pnego w workflow.  
   - **`contents: read`** nadaje tylko odczyt do zawartoÅ›ci repozytorium â€” zgodnie z zasadÄ… najmniejszych uprawnieÅ„. Wystarcza do pobrania kodu bez niepotrzebnych praw zapisu.

4. ````yaml
   jobs:
     build:
       runs-on: ubuntu-latest
       defaults:
         run:
           shell: bash
           working-directory: CWICZENIA/05-usung-filters-and-activity-types/
   ````
   Definiuje zadanie **`build`**.
   - **`runs-on: ubuntu-latest`**: Zadanie wykona siÄ™ na hostowanym runnerze Ubuntu z najnowszym obrazem.
   - **`defaults.run.shell: bash`**: DomyÅ›lnÄ… powÅ‚okÄ… dla krokÃ³w `run:` bÄ™dzie Bash.
   - **`defaults.run.working-directory: CWICZENIA/05-usung-filters-and-activity-types/`**: Wszystkie kroki `run:` wykonajÄ… siÄ™ w tym podkatalogu (nie trzeba powtarzaÄ‡ `cd`). Dostosuj, jeÅ›li projekt leÅ¼y gdzie indziej.

5. ````yaml
       steps:
         - name: Checkout
           uses: actions/checkout@v4
   ````
   Rozpoczyna listÄ™ krokÃ³w w zadaniu `build`.
   - **`- name: Checkout`**: Czytelna etykieta kroku.
   - **`uses: actions/checkout@v4`**: Oficjalna akcja pobierajÄ…ca kod repozytorium na runnera, aby kolejne kroki miaÅ‚y dostÄ™p do plikÃ³w.

6. ````yaml
         - name: Ustal wersjÄ™ Node (przykÅ‚ad)
           uses: actions/setup-node@v4
           with:
             node-version: '20'
   ````
   Ustawia wersjÄ™ Node.js dla Å›rodowiska.
   - **`uses: actions/setup-node@v4`**: Oficjalna akcja do instalacji/konfiguracji Node.js.
   - **`with.node-version: '20'`**: Instaluje Node 20.x. Utrzymanie spÃ³jnoÅ›ci narzÄ™dzi miÄ™dzy uruchomieniami.

7. ````yaml
         - name: Instalacja zaleÅ¼noÅ›ci
           run: npm ci
   ````
   Instaluje zaleÅ¼noÅ›ci produkcyjne i deweloperskie w sposÃ³b czysty i powtarzalny.
   - **`npm ci`**: Wykorzystuje plik blokady (np. `package-lock.json`) do deterministycznej, szybkiej instalacji â€” lepsze w CI niÅ¼ `npm install`.

8. ````yaml
         - name: Testy
           run: npm test -- --ci
   ````
   Uruchamia testy projektu.
   - **`npm test`**: Wykonuje skrypt testowy z `package.json`.
   - **`-- --ci`**: Przekazuje flagÄ™ `--ci` do test runnera (np. Jest), wymuszajÄ…c tryb nieinteraktywny i spÃ³jne raportowanie w CI.

### 3) Jak to dostarczyÄ‡
1. UtwÃ³rz foldery, jeÅ›li ich nie ma: `.github/workflows/`.
2. Dodaj plik `ci.yml` z opisanymi powyÅ¼ej treÅ›ciami.
3. Zacommituj i wypchnij na `main` albo otwÃ³rz PR na `main`. Workflow uruchomi siÄ™ na `push`, `pull_request` oraz rÄ™cznie przez `workflow_dispatch`.

### 4) WskazÃ³wki
- **Filtry Å›cieÅ¼ek:** `paths-ignore` oszczÄ™dza zasoby, gdy zmiany dotyczÄ… tylko dokumentacji.
- **Uprawnienia:** Pozostaw `contents: read`, chyba Å¼e kroki wymagajÄ… wiÄ™cej (np. tworzenie releaseâ€™Ã³w). Minimalne uprawnienia = mniejsze ryzyko.
- **Cache (opcjonalnie):** W `actions/setup-node` moÅ¼na wÅ‚Ä…czyÄ‡ cache (`cache: 'npm'`) w celu przyspieszenia `npm ci`.
- **Macierze (opcjonalnie):** Skonfiguruj `strategy.matrix.node-version: [18, 20]`, aby testowaÄ‡ wiele wersji Node.

---

*End of file / Koniec pliku*
